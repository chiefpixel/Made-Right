/*!
 * instaFilta
 * Version: 1.3
 * Description: jQuery plugin for performing in-page filtering
 * Homepage and documentation: https://github.com/chromawoods/instaFilta
 * Author: Andreas Larsson <andreas@chromawoods.com> (http://chromawoods.com)
 * Contributions: Jaap-Jan Frans
 */
!function(t){t.fn.instaFilta=function(a){var s=null,e=null,n=t.extend({scope:null,targets:".instafilta-target",sections:".instafilta-section",categoryDataAttr:"instafilta-category",matchCssClass:"instafilta-match",markMatches:!1,hideEmptySections:!0,beginsWith:!1,caseSensitive:!1,typeDelay:0,useSynonyms:!0,synonyms:[{src:"à,á,å,ä,â,ã",dst:"a"},{src:"À,Á,Å,Ä,Â,Ã",dst:"A"},{src:"è,é,ë,ê",dst:"e"},{src:"È,É,Ë,Ê",dst:"E"},{src:"ì,í,ï,î",dst:"i"},{src:"Ì,Í,Ï,Î",dst:"I"},{src:"ò,ó,ö,ô,õ",dst:"o"},{src:"Ò,Ó,Ö,Ô,Õ",dst:"O"},{src:"ù,ú,ü,û",dst:"u"},{src:"Ù,Ú,Ü,Û",dst:"U"},{src:"ç",dst:"c"},{src:"Ç",dst:"C"},{src:"æ",dst:"ae"}]},a);if(n.useSynonyms)for(var i=0,r=n.synonyms.length;r>i;i++)n.synonyms[i].src=n.synonyms[i].src.split(",");return this.each(function(){var a,i,r,c,o="";n.scope?(c=t(this).closest(n.scope),i=c.find(n.targets),r=c.find(n.sections)):(i=t(n.targets),r=t(n.sections)),i.each(function(){$target=t(this),original=$target.text(),$target.data("values",function(t){var a=[original],s=original;if(!n.useSynonyms)return a;for(var e=0,i=t.length;i>e;e++)for(var r=0;r<t[e].src.length;r++)s=s.replace(t[e].src[r],t[e].dst);return!(s!==original)||a.push(s),a}(n.synonyms))});var l=function(){r.each(function(){var a=t(this);a.toggle(!!a.find('[data-instafilta-hide="false"]').length)})},f=function(){var t=i.filter('[data-instafilta-hide="false"]').show();return i.filter('[data-instafilta-hide="true"]').hide(),n.hideEmptySections&&l(),t},u=function(){i.attr("data-instafilta-hide","false").show(),r.show()};s=function(a){return a=n.caseSensitive?a:a.toLowerCase(),o===a?!1:(o=a,a||u(),i.each(function(){var s=t(this);s.data("originalText")||(s.data("originalHtml",s.html()),s.data("originalText",s.data("values")[0]));var e=function(t,a){for(var s=-1,e=0;e<t.length&&(s=(n.caseSensitive?t[e]:t[e].toLowerCase()).indexOf(a),!(s>=0));e++);return s}(s.data("values"),a),i=s.data("originalText"),r=(n.caseSensitive?i:i.toLowerCase(),null),c=null;e>=0&&n.markMatches&&(r=i.substring(e,e+a.length),c=i.replace(r,'<span class="'+n.matchCssClass+'">'+r+"</span>"),s.html(s.data("originalHtml").replace(i,c))),s.attr("data-instafilta-hide",n.beginsWith&&0!==e||0>e?"true":"false")}),f())},e=function(a){var s=function(t){return(t.data(n.categoryDataAttr)||"").split(",")};return r.each(function(){var e=t(this);sectCategories=s(e),e.find(n.targets).each(function(){for(var e=t(this),n=!1,i=s(e).concat(sectCategories),r=0;r<i.length;r++)if(a===i[r].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")){n=!0;break}e.html(e.data("originalText")).attr("data-instafilta-hide",n?!1:!0)})}),a||u(),f()},t(this).on("keyup",function(){var e=t(this);clearTimeout(a),a=setTimeout(function(){s(e.val())},n.typeDelay)})}),{filterTerm:s,filterCategory:e}}}(jQuery);